<html>
<head>
<title>Distance Map</title>
<link rel=stylesheet href="../../../style.css" type="text/css" media=screen>
<link rel=stylesheet href="../../../style-print.css" type="text/css" media=print></link>
</head>

<body>

<h1>Distance Map</h1>

<img class="screenshot" src="../icons/DistanceMap.png">
<p>Visualizes distances between items</p>

<h2>Channels</h2>

<h3>Inputs</h3>

<DL class=attributes>
<DT>Distance Matrix (SymMatrix)</DT>
<DD>A distance matrix</DD>
</dl>

<h3>Outputs</h3>
<DL class="attributes">
<DT>Examples (ExampleTable)</DT>
<DD>Examples corresponding to selected elements of the matrix</DD>

<DT>Attribute List (orange.VarList)</DT>
<DD>Attributes corresponding to selected elements of the matrix</DD>
</dl>

<h2>Description</h2>

<p>Distance Map is a visualization of distances between objects. The visualization is rather simple: it is the same as is we printed out a table of numbers, except that the numbers are replaced by spots colored by colors from the specified palette.</p>

<p>The distances are most often distances between examples (for instance from <a href="ExampleDistance.htm">Example Distance</a>) or attributes (for instance from <a href="AttributeDistance.htm">Attribute Distance</a>). The widget does not require that (another option can be loading the distances from a file using <a href="DistanceFile.htm">Distance File</a>), although when one of these is the case, the user can select a region of the map and the widget will output the corresponding examples or attributes through the appropriate signal.</p>

<img class="screenshot" src="DistanceMap.png" />

<p>The snapshot shows distances between attributes in the heart disease data, using the preset Black - Red palette, where smaller numbers are represented with black and larger with red. The matrix is symmetric and the diagonal is black - no attribute is different from itself. The former (symmetricity) is always assumed, while the diagonal may also be non-zero.</p>

<img class="leftscreenshot" src="DistanceMap-Settings.png" />

<p>The widget's settings are divided into three tabs. The first one defines the size and order of cells. <span class="option">Width</span> and <span class="option">Height</span> in the <span class="option">Cell Size</span> box set the size of the cells. The cells can be restricted to squares (<span class="option">Cells as squares</span>) and drawn with or without gridlines in between (<span class="option">Show grid</span>). When cells are too small (8 pixels or less), the grid disappears in any case.</p>

<p><span class="option">Merge</span> merges multiple cells into a single cell, which can be useful when the matrix is too large. For this option to yield meaningful results, items need to be sorted so similar items are merged. The widget has three options; it can leave the items as they are (<span class="option">No sorting</span>) it can put similar items together (<span class="option">Adjacent distance</span>) or randomly shuffle the items (<span class="option">Random order</span>). Of these, adjacent distance is unfortunately not implemented yet.</p>

<p style="clear:both">&nbsp;</p>

<img class="leftscreenshot" src="DistanceMap-Colors.png" />

<p>The second tab defines the colors that represent the numeric values. <span class="option">Gamma</span> defines how numbers are mapped onto the palette colors. When set to 1 (default), the mapping is linear. When it decreases, the numeric values at the lower end get similar colors, the curve get steeper in the middle, and higher values are again represented with colors which are more similar than if gamma was higher. The graph below shows the mapping function at gamma=0.25.</p>

<center><img src="DistanceMap-gamma.png" /></center>

<p>Setting gamma is useful when the distribution of distances has long tails which are not very interested. The widget also offers controls for cutting of the outliers. Normally, the color palette is used to visualize the entire range of distances appearing in the matrix. This can be changed be checking <span class="option">Enable thresholds</span> and setting the low and high threshold. Distances outside this interval are then shown using special colors, so the color spectrum can be used for visualizing the interesting part of the distribution.</p>

<p>The widget supports different color schemes. The built-in schemes are named <span class="option">Blue - Yellow</span>, <span class="option">Black - Red</span> and <span class="option">Green - Black - Red</span>. The schema is defined, first, by the two colors representing the lowest and highest distances. The two colors are set by clicking the rectangles to the left and right of the color strip below the schema name. The transition can go either from one color to another (in the RGB space) or <span class="option">Pass through black</span>, that is, from one color to black and then to another. Colors can also be set for undefined values (<span class="option">N/A</span>), values below and above the low and high thresholds (<span class="option">Underflow</span> and <span class="option">Overflow</span>), the background (<span class="option">Background</span>), the outline of the cell under the mouse cursor (<span class="option">Cell outline</span>) and the marker around the selected region (<span class="option">Selected cells</span>).</p>

<p>User can modify the existing schemata and also create new, customized schemata (<span class="option">New</span>). The built-in schemata are shown below.</p>

<table style="clear:both" "align="center"><tr><td><img src="DistanceMap-Yellow-Blue.png"/>&nbsp;</td><td><img src="DistanceMap-Black-Red.png"/>&nbsp;</td><td><img src="DistanceMap-Green-Black-Red.png"/>&nbsp;</td></tr>
<tr><td align="center">Yellow - Blue</td><td align="center">Black - Red</td><td align="center">Green - Black - Red</td></tr></table>

<img class="leftscreenshot" src="DistanceMap-Info.png" />

<p>The last tab defines the shown information and controls selection of cells. <span class="option">Show legend</span> determines whether the widget shows the colored strip at the top which shows the mapping of numbers into colors. <span class="option">Show labels</span> shows and hides the item names (e.g. age, gender etc) besides the map. Labels can only be shown it they exist; they do when the data represents distances between attributes or when the data is loaded from a labeled distance file.</p>

<p>If <span class="option">Show balloon</span> is checked, a ballon appears when the mouse is hovering over a cell, which shows the numerical distances and, if <span class="option">Display item names</span> is checked, also the names of the corresponding items.</p>

<p>The user can select a region in the map by the usual click-and-drag with the mouse. When a part of the map is selected, the widget output all items corresponding to the selected cells. The three buttons in the <span class="option">Select</span> can undo the last selection, remove all selections and send the selected data. If <span class="option">Send after mouse release</span> is checked, the data is set automatically, without needing to press the button above.</p>

<h2>Examples</h2>

<P>The above snapshots were obtained by the following schema:</P>

<img class="screenshot" src="DistanceMap-Schema.png"/>

<p>The file widget loads the iris data set; we then compute the attribute distances and visualize them.</p>

</body>
</html>
